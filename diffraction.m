N=512; 
disp('?????? 1.??  2.?? 3.??')
kind=input('please input ???????');% ????????
while kind~=1&kind~=2&kind~=3 
    disp('??????????????????');
    kind=input('please input ???????');% ????????   
end
switch(kind)
case 1    
r=input('please input ??????(mm)?');% ?????????
I=zeros(N,N);
[m,n]=meshgrid(linspace(-N/16,N/16-1,N));
D=(m.^2+n.^2).^(1/2);
I(find(D<=r))=1;
subplot(1,2,1),imshow(I);
title('???????');
 
 
case 2
a=input('please input ?????');% ?????????
b=1000;% ?????
I=zeros(N,N);
[m,n]=meshgrid(linspace(-N/4,N/4,N));
I(-a<m&m<a&-b<n&n<b)=1;
subplot(1,2,1);imshow(I);
title('???????');
    
 case 3
a=input('please input ?????');% ??????
I=zeros(N,N);
[m,n]=meshgrid(linspace(-N/4,N/4,N));
I(-a/2<m&m<a/2&-a/2<n&n<a/2)=1;
subplot(1,2,1),imshow(I);
title('?????');
    otherwise kind=input('please input ???????');% ????????
end
 
    %  ???????????
 L=500;
[x,y]=meshgrid(linspace(-L/2,L/2,N));
lamda_1=input('please input ????(nm)?');% ??????;
lamda=lamda_1/1e6
k=2*pi/lamda;
z=input('please input ???????????(mm)?');%  ???????????
h=exp(1j*k*z)*exp((1j*k*(x.^2+y.^2))/(2*z))/(1j*lamda*z);%????
H =fftshift(fft2(h));%????
B=fftshift(fft2(I));%???
G=fftshift(ifft2(H.*B));
subplot(1,2,2),imshow(log(1+abs(G)),[]);
title('??????');
figure
meshz(x,y,abs(G));
title('??????????')
 
%??????????? 1.??  2.?? 3.??
please input ???????1
please input ??????(mm)?3
please input ????(nm)?632
lamda =6.3200e-04
please input ???????????(mm)?1000000
